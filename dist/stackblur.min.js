!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.StackBlur=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){e.r=0,e.g=0,e.b=0,e.a=0,e.next=null}var e={shg_table:[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],mul_table:[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],image:function(a,b,c,d){if("string"==typeof a)var a=document.getElementById(a);else if(!a instanceof HTMLImageElement)return;var f=a.naturalWidth,g=a.naturalHeight;if("string"==typeof b)var b=document.getElementById(b);else if(!b instanceof HTMLCanvasElement)return;b.style.width=f+"px",b.style.height=g+"px",b.width=f,b.height=g;var h=b.getContext("2d");h.clearRect(0,0,f,g),h.drawImage(a,0,0),isNaN(c)||1>c||(d?e.canvasRGBA(b,0,0,f,g,c):e.canvasRGB(b,0,0,f,g,c))},getImageDataFromCanvas:function(a,b,c,d,e){if("string"==typeof a)var a=document.getElementById(a);else if(!a instanceof HTMLCanvasElement)return;var f,g=a.getContext("2d");try{try{f=g.getImageData(b,c,d,e)}catch(h){throw new Error("unable to access local image data: "+h)}}catch(h){throw new Error("unable to access image data: "+h)}return f},canvasRGBA:function(a,b,c,d,f,g){if(!(isNaN(g)||1>g)){g|=0;var h=e.getImageDataFromCanvas(a,b,c,d,f);h=e.imageDataRGBA(h,b,c,d,f,g),a.getContext("2d").putImageData(h,b,c)}},imageDataRGBA:function(a,b,c,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=a.data,H=h+h+1,I=f-1,J=g-1,K=h+1,L=K*(K+1)/2,M=new d,N=M;for(k=1;H>k;k++)if(N=N.next=new d,k==K)var O=N;N.next=M;var P=null,Q=null;o=n=0;var R=e.mul_table[h],S=e.shg_table[h];for(j=0;g>j;j++){for(x=y=z=A=p=q=r=s=0,t=K*(B=G[n]),u=K*(C=G[n+1]),v=K*(D=G[n+2]),w=K*(E=G[n+3]),p+=L*B,q+=L*C,r+=L*D,s+=L*E,N=M,k=0;K>k;k++)N.r=B,N.g=C,N.b=D,N.a=E,N=N.next;for(k=1;K>k;k++)l=n+((k>I?I:k)<<2),p+=(N.r=B=G[l])*(F=K-k),q+=(N.g=C=G[l+1])*F,r+=(N.b=D=G[l+2])*F,s+=(N.a=E=G[l+3])*F,x+=B,y+=C,z+=D,A+=E,N=N.next;for(P=M,Q=O,i=0;f>i;i++)G[n+3]=E=s*R>>S,0!=E?(E=255/E,G[n]=(p*R>>S)*E,G[n+1]=(q*R>>S)*E,G[n+2]=(r*R>>S)*E):G[n]=G[n+1]=G[n+2]=0,p-=t,q-=u,r-=v,s-=w,t-=P.r,u-=P.g,v-=P.b,w-=P.a,l=o+((l=i+h+1)<I?l:I)<<2,x+=P.r=G[l],y+=P.g=G[l+1],z+=P.b=G[l+2],A+=P.a=G[l+3],p+=x,q+=y,r+=z,s+=A,P=P.next,t+=B=Q.r,u+=C=Q.g,v+=D=Q.b,w+=E=Q.a,x-=B,y-=C,z-=D,A-=E,Q=Q.next,n+=4;o+=f}for(i=0;f>i;i++){for(y=z=A=x=q=r=s=p=0,n=i<<2,t=K*(B=G[n]),u=K*(C=G[n+1]),v=K*(D=G[n+2]),w=K*(E=G[n+3]),p+=L*B,q+=L*C,r+=L*D,s+=L*E,N=M,k=0;K>k;k++)N.r=B,N.g=C,N.b=D,N.a=E,N=N.next;for(m=f,k=1;h>=k;k++)n=m+i<<2,p+=(N.r=B=G[n])*(F=K-k),q+=(N.g=C=G[n+1])*F,r+=(N.b=D=G[n+2])*F,s+=(N.a=E=G[n+3])*F,x+=B,y+=C,z+=D,A+=E,N=N.next,J>k&&(m+=f);for(n=i,P=M,Q=O,j=0;g>j;j++)l=n<<2,G[l+3]=E=s*R>>S,E>0?(E=255/E,G[l]=(p*R>>S)*E,G[l+1]=(q*R>>S)*E,G[l+2]=(r*R>>S)*E):G[l]=G[l+1]=G[l+2]=0,p-=t,q-=u,r-=v,s-=w,t-=P.r,u-=P.g,v-=P.b,w-=P.a,l=i+((l=j+K)<J?l:J)*f<<2,p+=x+=P.r=G[l],q+=y+=P.g=G[l+1],r+=z+=P.b=G[l+2],s+=A+=P.a=G[l+3],P=P.next,t+=B=Q.r,u+=C=Q.g,v+=D=Q.b,w+=E=Q.a,x-=B,y-=C,z-=D,A-=E,Q=Q.next,n+=f}return a},canvasRGB:function(a,b,c,d,f,g){if(!(isNaN(g)||1>g)){g|=0;var h=e.getImageDataFromCanvas(a,b,c,d,f);h=e.imageDataRGB(h,b,c,d,f,g),a.getContext("2d").putImageData(h,b,c)}},imageDataRGB:function(a,b,c,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=a.data,D=h+h+1,E=f-1,F=g-1,G=h+1,H=G*(G+1)/2,I=new d,J=I;for(k=1;D>k;k++)if(J=J.next=new d,k==G)var K=J;J.next=I;var L=null,M=null;o=n=0;var N=e.mul_table[h],O=e.shg_table[h];for(j=0;g>j;j++){for(v=w=x=p=q=r=0,s=G*(y=C[n]),t=G*(z=C[n+1]),u=G*(A=C[n+2]),p+=H*y,q+=H*z,r+=H*A,J=I,k=0;G>k;k++)J.r=y,J.g=z,J.b=A,J=J.next;for(k=1;G>k;k++)l=n+((k>E?E:k)<<2),p+=(J.r=y=C[l])*(B=G-k),q+=(J.g=z=C[l+1])*B,r+=(J.b=A=C[l+2])*B,v+=y,w+=z,x+=A,J=J.next;for(L=I,M=K,i=0;f>i;i++)C[n]=p*N>>O,C[n+1]=q*N>>O,C[n+2]=r*N>>O,p-=s,q-=t,r-=u,s-=L.r,t-=L.g,u-=L.b,l=o+((l=i+h+1)<E?l:E)<<2,v+=L.r=C[l],w+=L.g=C[l+1],x+=L.b=C[l+2],p+=v,q+=w,r+=x,L=L.next,s+=y=M.r,t+=z=M.g,u+=A=M.b,v-=y,w-=z,x-=A,M=M.next,n+=4;o+=f}for(i=0;f>i;i++){for(w=x=v=q=r=p=0,n=i<<2,s=G*(y=C[n]),t=G*(z=C[n+1]),u=G*(A=C[n+2]),p+=H*y,q+=H*z,r+=H*A,J=I,k=0;G>k;k++)J.r=y,J.g=z,J.b=A,J=J.next;for(m=f,k=1;h>=k;k++)n=m+i<<2,p+=(J.r=y=C[n])*(B=G-k),q+=(J.g=z=C[n+1])*B,r+=(J.b=A=C[n+2])*B,v+=y,w+=z,x+=A,J=J.next,F>k&&(m+=f);for(n=i,L=I,M=K,j=0;g>j;j++)l=n<<2,C[l]=p*N>>O,C[l+1]=q*N>>O,C[l+2]=r*N>>O,p-=s,q-=t,r-=u,s-=L.r,t-=L.g,u-=L.b,l=i+((l=j+G)<F?l:F)*f<<2,p+=v+=L.r=C[l],q+=w+=L.g=C[l+1],r+=x+=L.b=C[l+2],L=L.next,s+=y=M.r,t+=z=M.g,u+=A=M.b,v-=y,w-=z,x-=A,M=M.next,n+=f}return a}};b.exports={image:e.image,canvasRGBA:e.canvasRGBA,canvasRGB:e.canvasRGB,imageDataRGBA:e.imageDataRGBA,imageDataRGB:e.imageDataRGB}},{}]},{},[1])(1)});